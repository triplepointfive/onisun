{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/grid.ts","webpack:///./src/Cell.vue?8e61","webpack:///./src/Cell.vue","webpack:///./src/Cell.vue?d3ad","webpack:///./src/utils.ts","webpack:///./src/ai.ts","webpack:///./src/ai/patrol.ts","webpack:///./src/ai/explorer.ts","webpack:///./src/fov.ts","webpack:///./src/creatures/walker.ts","webpack:///./src/App.vue?7183","webpack:///./src/App.vue","webpack:///./src/App.vue?a070","webpack:///./src/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","p","jsonpArray","window","oldJsonpFunction","bind","slice","TileTypes","Direction","MapBlockState","Tile","[object Object]","key","display","type","this","register","tile","repository","Floor","Wall","Door","grid_Block","content","weight","Dimensions","some","row","id","map","join","block","matchHorizontal","matchVertical","lodash","reverse","rotate","matrix","temp","left","right","top","bottom","MapBlock","state","EMPTY","undefined","CONFIRMED","Random","Math","random","Cell","vue_runtime_esm","extend","props","computed","player","cell","__vue_styles__","context","src_Cell","component_normalizer","_vm","_h","$createElement","_self","_c","class","style","domProps","textContent","_s","symbol","on","click","$event","$emit","succ","String","fromCharCode","charCodeAt","twoDimArray","dimX","dimY","field","Array","leePath","walker","destination","stageMemory","height","width","pointsToVisit","pointsToCheck","x","y","step","wavePoints","forEach","point","at","tangible","floor","buildRoad","x0","y0","chain","delta","find","dp","unshift","patrol_Patrol","graph","graphlib","addNode","lastNodeVisit","markNodeVisited","currentNodeID","path","moveToTarget","targetNodeID","pickUpNewTarget","withEdge","setNode","setEdge","pos","node","seenLastID","seenLastStep","neighbors","nodeID","buildNewPath","nextPoint","act","NEW_POINT_EVERY","explorer_Explorer","patrol","updatePatrol","ai","seen","Fov","startx","starty","radius","checkSolid","markVisible","doubleRadius","dx","dy","castLight","start","end","xx","xy","yx","yy","newStart","blocked","distance","deltaY","deltaX","currentX","round","currentY","leftSlope","rightSlope","doubleDistance","MemoryTile","visible","degree","walker_Memory","baseBlock","blocks","pause","ts","Date","now","components","stage","visionMask","resetVisible","visibleThrough","passibleThrough","calc","levelMap","methods","blockRepository","borderBlock","uniqBlockIds","Set","addBlock","mirrored","has","add","findNeighbors","horizontalBlock","mirrorHorizontally","mirrorVertically","rotationBlock","rotateRight","availableBlocks","Bottom","Top","Right","Left","centralBlock","matchTop","addNeighbor","matchBootom","matchLeft","matchRight","central","neighbor","direction","rawToTiles","blockMap","steps","initializeBlockMap","confirmBlock","shuffledBlocks","available","k","fillMap","buildMap","addDoors","iterateHeight","iterateWidth","blockRow","concat","fill","addDoor","retrive","postProcess","clearInterval","walkerinterval","setInterval","e","console","error","toMap","tiles","tileRow","split","background","color","opacity","fov","App_vue_styles_","src_App","App","attrs","staticClass","_l","visibility","setPosition","updatePlayerPosition","_v","directives","rawName","expression","input","target","composing","$set","el","render","h"],"mappings":"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","file":"main.c31196df.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".\" + {}[chunkId] + \".js\"\n \t}\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([38,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as _ from 'lodash'\n\ntype BlockId = string\n\nexport enum TileTypes {\n  Wall,\n  Door,\n  Floor,\n}\n\nexport class Tile {\n  private static repository: { [key: string]: Tile } = {}\n\n  private static register(key: string, tile: Tile) {\n    if (this.repository[key]) {\n      throw `Tile '${key}' is already registered!`\n    }\n\n    this.repository[key] = tile\n  }\n\n  public static retrive(key: string): Tile {\n    let tile = this.repository[key]\n\n    if (!tile) {\n      throw `Tile '${key}' is not registered!`\n    }\n\n    return tile\n  }\n\n  // TODO: rename type to kind\n  constructor(public key: string, public display: string, public type: TileTypes) {\n    Tile.register(key, this)\n  }\n\n  public visibleThrough(): boolean {\n    return this.type === TileTypes.Floor\n  }\n\n  public passibleThrough(): boolean {\n    return this.type !== TileTypes.Wall\n  }\n}\n\nnew Tile('R', ' ', TileTypes.Floor)\nnew Tile('C', ' ', TileTypes.Floor)\nnew Tile('W', '#', TileTypes.Wall)\nnew Tile('D', '+', TileTypes.Door)\n\nexport class Block {\n  public static readonly Dimensions = 3\n\n  public id: BlockId\n\n  constructor(public content: Tile[][], public weight: number) {\n    if (content.length !== Block.Dimensions || content.some(row => row.length !== Block.Dimensions)) {\n      throw `Invalid block '${content}'`\n    }\n\n    this.id = content.map(row => row.map(tile => tile.key).join('')).join('')\n  }\n\n  public matchRight(block: Block): boolean {\n    return this.matchHorizontal(this, block)\n  }\n\n  public matchLeft(block: Block): boolean {\n    return this.matchHorizontal(block, this)\n  }\n\n  public matchTop(block: Block): boolean {\n    return this.matchVertical(block, this)\n  }\n\n  public matchBootom(block: Block): boolean {\n    return this.matchVertical(this, block)\n  }\n\n  public mirrorVertically(): Block {\n    return new Block(_.cloneDeep(this.content).reverse(), this.weight)\n  }\n\n  public mirrorHorizontally(): Block {\n    return new Block(_.cloneDeep(this.content).map(row => row.reverse()), this.weight)\n  }\n\n  public rotateRight(): Block {\n    return new Block(this.rotate(_.cloneDeep(this.content)), this.weight)\n  }\n\n  private rotate(matrix: any[][]): any[][] {\n    matrix = matrix.reverse()\n\n    let temp: number\n    for (let i = 0; i < matrix.length; i++) {\n      for (let j = 0; j < i; j++) {\n        temp = matrix[i][j]\n        matrix[i][j] = matrix[j][i]\n        matrix[j][i] = temp\n      }\n    }\n\n    return matrix\n  }\n\n  private matchHorizontal(left: Block, right: Block): boolean {\n    return _.isEqual(\n      left.content.map(row => row[Block.Dimensions - 1]),\n      right.content.map(row => row[0]),\n    )\n  }\n\n  private matchVertical(top: Block, bottom: Block): boolean {\n    return _.isEqual(\n      top.content[Block.Dimensions - 1],\n      bottom.content[0],\n    )\n  }\n}\n\nenum Direction {\n  Top,\n  Bottom,\n  Left,\n  Right,\n}\n\ninterface Neighbors {\n  [key: string]: Block[]\n}\n\nexport class BlockRepository {\n  public blocks: Block[] = []\n  public uniqBlockIds: Set<string> = new Set()\n\n  public neighbors: { [key: string]: Neighbors } = {}\n\n  constructor(public borderBlock: Block) {\n    this.addBlock(borderBlock)\n  }\n\n  public addBlock(block: Block, mirrored: boolean = false): void {\n    if (this.uniqBlockIds.has(block.id)) {\n      return\n    }\n\n    this.blocks.push(block)\n    this.uniqBlockIds.add(block.id)\n\n    this.findNeighbors(block)\n\n    if (!mirrored) {\n      const horizontalBlock = block.mirrorHorizontally()\n\n      this.addBlock(horizontalBlock, true)\n      this.addBlock(block.mirrorVertically(), true)\n      this.addBlock(horizontalBlock.mirrorVertically(), true)\n    }\n\n    let rotationBlock = block.rotateRight()\n    for (let i = 0; i < 3; i++) {\n      this.addBlock(rotationBlock, true)\n      rotationBlock = rotationBlock.rotateRight()\n    }\n  }\n\n  public available(top: Block | undefined, bottom: Block | undefined,\n                   left: Block | undefined, right: Block | undefined): Block[] {\n    let availableBlocks = this.blocks\n\n    if (top !== undefined) {\n      availableBlocks = _.intersection(availableBlocks, this.neighbors[top.id][Direction.Bottom])\n    }\n\n    if (bottom !== undefined) {\n      availableBlocks = _.intersection(availableBlocks, this.neighbors[bottom.id][Direction.Top])\n    }\n\n    if (left !== undefined) {\n      availableBlocks = _.intersection(availableBlocks, this.neighbors[left.id][Direction.Right])\n    }\n\n    if (right !== undefined) {\n      availableBlocks = _.intersection(availableBlocks, this.neighbors[right.id][Direction.Left])\n    }\n\n    return _.sortBy(availableBlocks, block => Math.random() * block.weight)\n    // return _.sortBy(availableBlocks, block => 1 * block.weight).reverse()\n  }\n\n  private findNeighbors(centralBlock: Block) {\n    this.blocks.forEach((block) => {\n      if (centralBlock.matchTop(block)) {\n        this.addNeighbor(centralBlock, block, Direction.Top)\n        this.addNeighbor(block, centralBlock, Direction.Bottom)\n      }\n\n      if (centralBlock.matchBootom(block)) {\n        this.addNeighbor(centralBlock, block, Direction.Bottom)\n        this.addNeighbor(block, centralBlock, Direction.Top)\n      }\n\n      if (centralBlock.matchLeft(block)) {\n        this.addNeighbor(centralBlock, block, Direction.Left)\n        this.addNeighbor(block, centralBlock, Direction.Right)\n      }\n\n      if (centralBlock.matchRight(block)) {\n        this.addNeighbor(centralBlock, block, Direction.Right)\n        this.addNeighbor(block, centralBlock, Direction.Left)\n      }\n    })\n  }\n\n  private addNeighbor(central: Block, neighbor: Block, direction: Direction) {\n    if (!this.neighbors[central.id]) {\n      this.neighbors[central.id] = {\n        [Direction.Top]: [],\n        [Direction.Bottom]: [],\n        [Direction.Left]: [],\n        [Direction.Right]: [],\n      }\n    }\n\n    this.neighbors[central.id][direction].push(neighbor)\n  }\n}\n\nenum MapBlockState {\n  EMPTY,\n  CONFIRMED,\n}\n\nclass MapBlock {\n  private state: MapBlockState\n  public block?: Block\n\n  constructor() {\n    this.state = MapBlockState.EMPTY\n  }\n\n  public isFinished(): boolean {\n    return this.block !== undefined && this.state === MapBlockState.CONFIRMED\n  }\n\n  public confirmBlock() {\n    this.state = MapBlockState.CONFIRMED\n  }\n}\n\nclass Random {\n  public static addDoor(): boolean {\n    return Math.random() > 0.5\n  }\n}\n\nexport class Map {\n  private blockMap: MapBlock[][] = []\n  private map: Tile[][] = []\n\n  private steps = 0\n\n  constructor(public width: number, public height: number, private blockRepository: BlockRepository) {\n    this.initializeBlockMap()\n  }\n\n  public initializeBlockMap() {\n    for (let i = 0; i < this.height; i++) {\n      let row = []\n\n      for (let j = 0; j < this.width; j++) {\n        let block = new MapBlock()\n\n        if (i === 0 || j === 0 || i === this.height - 1 || j === this.width - 1) {\n          block.confirmBlock()\n          block.block = this.blockRepository.borderBlock\n        }\n\n        row.push(block)\n      }\n\n      this.blockMap.push(row)\n    }\n  }\n\n  public toMap(): Tile[][] {\n    return this.map\n  }\n\n  public fillMap(i: number, j: number): boolean {\n    if (this.blockMap[i][j].block !== undefined) {\n      return true\n    }\n    this.steps += 1\n\n    if (this.steps > 100000) {\n      throw 'failed to generate'\n    }\n\n    const top = this.blockMap[i - 1][j].block\n    const bottom = this.blockMap[i + 1][j].block\n    const left = this.blockMap[i][j - 1].block\n    const right = this.blockMap[i][j + 1].block\n\n    const shuffledBlocks = this.blockRepository.available(top, bottom, left, right)\n    for (let k = 0; k < shuffledBlocks.length; k++) {\n      const block: Block = shuffledBlocks[k]\n\n      this.blockMap[i][j].block = block\n\n      const state = this.fillMap(i - 1, j)\n                 && this.fillMap(i, j - 1)\n                 && this.fillMap(i + 1, j)\n                 && this.fillMap(i, j + 1)\n\n      if (state) {\n        break\n      }\n      else {\n        this.blockMap[i][j].block = undefined\n      }\n    }\n\n    return this.blockMap[i][j].block !== undefined\n  }\n\n  public postProcess(): void {\n    this.buildMap()\n    this.addDoors()\n  }\n\n  private buildMap(): void {\n    const iterateHeight = this.height - 1\n    const iterateWidth = this.width - 1\n\n    for (let i = 1; i < iterateHeight; i++) {\n      for (let k = 0; k < Block.Dimensions - (i === iterateHeight - 1 ? 0 : 1); k++) {\n        let row: Tile[] = []\n\n        for (let j = 1; j < iterateWidth; j++) {\n          const block: Block | undefined = this.blockMap[i][j].block\n\n          if (block) {\n            const blockRow = block.content[k]\n            row = row.concat(j === iterateWidth - 1 ? blockRow : _.initial(blockRow))\n          } else {\n            const blockRow: Tile[] = new Array(Block.Dimensions).fill(' ')\n            row = row.concat(blockRow)\n          }\n        }\n\n        this.map.push(row)\n      }\n    }\n  }\n\n  private addDoors(): void {\n    for (let i = 1; i < this.map.length; i++) {\n      const row: Tile[] = this.map[i]\n\n      for (let j = 1; j < row.length; j++) {\n        if (row[j].key === 'C' && (this.map[i][j - 1].key === 'R' || this.map[i - 1][j].key === 'R') && Random.addDoor()) {\n          row[j] = Tile.retrive('D')\n        }\n      }\n    }\n  }\n}\n\nexport class LevelMap {\n  public readonly width: number\n  public readonly height: number\n\n  constructor(private map: Tile[][]) {\n    this.width  = map[0].length\n    this.height = map.length\n  }\n\n  public visibleThrough(x: number, y: number): boolean {\n    return this.map[y][x].visibleThrough()\n  }\n\n  public passibleThrough(x: number, y: number): boolean {\n    return this.map[y][x].passibleThrough()\n  }\n}\n","\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\n\nimport { Tile, TileTypes } from './grid'\n\nexport default Vue.extend({\n  props: [\"cell\", 'player'],\n  computed: {\n    style() {\n      if (this.player) {\n        return 'player'\n      } else if (this.cell.type == TileTypes.Wall) {\n        return 'wall'\n      } else if (this.cell.type == TileTypes.Door) {\n        return 'door'\n      }\n\n      return 'floor'\n    },\n    symbol():any {\n      if (this.player) {\n        return '俺'\n      } else if (this.cell.display == ' ') {\n        return '・'\n      } else if (this.cell.display == '+') {\n        return '戸'\n      } else if (this.cell.display == '#') {\n        return '＃'\n      } else {\n        return 'E'\n      }\n    }\n  }\n})\n","function injectStyle (context) {\n  require(\"!!../node_modules/mini-css-extract-plugin/dist/loader.js!css-loader?{\\\"autoprefixer\\\":false,\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Cell.vue\")\n}\n/* script */\nexport * from \"!!ts-loader?{\\\"appendTsSuffixTo\\\":[{}]}!../node_modules/vue-loader/lib/selector?type=script&index=0!./Cell.vue\"\nimport __vue_script__ from \"!!ts-loader?{\\\"appendTsSuffixTo\\\":[{}]}!../node_modules/vue-loader/lib/selector?type=script&index=0!./Cell.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8cc5763c\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=slm&optionsId=0!../node_modules/vue-loader/lib/selector?type=template&index=0!./Cell.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',{class:_vm.style,domProps:{\"textContent\":_vm._s(_vm.symbol)},on:{\"click\":function($event){_vm.$emit('setPosition')}}})}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","export class Rect {\n  x: number\n  y: number\n  w: number\n  h: number\n\n  constructor( x: number, y: number, w: number, h: number ) {\n    // TODO: Validate?\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n  }\n\n  move( x: number, y: number ): void {\n    this.x += x\n    this.y += y\n  }\n}\n\nexport const succ = function ( c: string ): string {\n  return String.fromCharCode( c.charCodeAt( 0 ) + 1 )\n}\n\nexport const rand = function ( max: number ): number {\n  return Math.floor( Math.random() * max )\n}\n\n/* tslint:disable no-any */\nexport const twoDimArray = function ( dimX: number, dimY: number,\n                                      value: ( x: number, y: number ) => any ): Array<Array<any>> {\n  let field = Array( dimX )\n\n  let i = 0\n  while ( i < dimX ) {\n    field[i] = new Array(dimY)\n    let j = 0\n    while ( j < dimY ) {\n      field[i][j] = value( i, j )\n      j++\n    }\n    i++\n  }\n\n  return field\n}\n\nexport const max = function( list: Array< number > ): number {\n  return Math.max.apply( Math, list )\n}\n\nexport const min = function( list: Array< number > ): number {\n  return Math.min.apply( Math, list )\n}\n\nexport interface Point {\n  x: number,\n  y: number\n}\n","import { Point, twoDimArray } from './utils'\nimport { Walker } from './creatures/walker'\n\ninterface AI {\n  act( walker: Walker ): void\n}\n\nclass TileRecall {\n  seen: boolean\n  tangible: boolean\n  visible: boolean\n  updated: boolean\n\n  constructor() {\n    this.seen = false\n    this.tangible = false\n    this.visible = false\n    this.updated = false\n  }\n}\n\nconst leePath = function ( walker: Walker,\n                           destination: ( x: number, y: number ) => boolean\n                         ): Array< Point > {\n  const map = walker.stageMemory\n\n  let stageMemory: Array< Array< number > > = twoDimArray( map.height, map.width, () => { return undefined } )\n  let pointsToVisit: Array< Point > = []\n  let pointsToCheck: Array< Point > = [ { x: walker.x, y: walker.y } ]\n\n  let step = 0\n  while ( pointsToCheck.length && !pointsToVisit.length ) {\n    // console.log(pointsToCheck )\n    let wavePoints: Array< Point > = []\n\n    pointsToCheck.forEach( ( point: Point ) => {\n      // TODO: Compare, current value might be lower\n      if ( map.at(point.x ,  point.y).tangible ||\n          stageMemory[ point.x ][ point.y ] !== undefined ) {\n        return\n      }\n\n      stageMemory[ point.x ][ point.y ] = step\n      if ( destination( point.x, point.y ) ) {\n        pointsToVisit.push( point )\n      } else {\n        wavePoints.push( { x: point.x - 1, y: point.y })\n        wavePoints.push( { x: point.x + 1, y: point.y })\n        wavePoints.push( { x: point.x, y: point.y - 1 })\n        wavePoints.push( { x: point.x, y: point.y + 1 })\n        wavePoints.push( { x: point.x - 1, y: point.y - 1 })\n        wavePoints.push( { x: point.x + 1, y: point.y - 1 })\n        wavePoints.push( { x: point.x + 1, y: point.y + 1 })\n        wavePoints.push( { x: point.x - 1, y: point.y + 1 })\n      }\n    })\n    step++\n\n    pointsToCheck = wavePoints\n  }\n\n  if ( pointsToVisit.length ) {\n    pointsToVisit[ Math.floor( Math.random() * pointsToVisit.length ) ]\n    return buildRoad( pointsToVisit[ 0 ], stageMemory )\n  } else {\n    return []\n  }\n}\n\n\nconst buildRoad = function ( point: Point, stageMemory: Array< Array< number > > ): Array< Point > {\n  let x0 = point.x, y0 = point.y\n  let chain = [ { x: x0, y: y0 } ]\n\n  let delta: Point = undefined\n\n  while ( stageMemory[ x0 ][ y0 ] !== 0 ) {\n\n    delta = [\n      { x: -1, y: 0 }, { x: 1, y: 0 }, { x: 0, y: -1 }, { x: 0, y: 1 },\n      { x: -1, y: -1 }, { x: 1, y: 1 }, { x: 1, y: -1 }, { x: -1, y: 1 }\n    ].find( ( dp ): boolean => {\n\n      return stageMemory[ x0 + dp.x ] &&\n        ( stageMemory[ x0 + dp.x ][ y0 + dp.y ] === stageMemory[ x0 ][ y0 ] - 1 )\n    })\n\n    x0 += delta.x\n    y0 += delta.y\n\n    chain.unshift( { x: x0, y: y0 } )\n  }\n\n  return chain\n}\n\nexport { AI, TileRecall, Walker, leePath }\n","import { Point, rand, succ } from '../utils'\nimport { AI, TileRecall, Walker, leePath } from '../ai'\n\nimport * as graphlib from 'graphlib'\n\ntype NodeID = string\n\nclass Patrol implements AI {\n  private i: NodeID\n  private step: number\n  private graph: graphlib.Graph\n  private lastNodeVisit: { [ key: string ]: number }\n  private currentNodeID: NodeID\n  private targetNodeID: NodeID\n  private path: Array< Point >\n\n  constructor( x: number, y: number ) {\n    this.i = 'a'\n\n    this.step = 0\n    this.graph = new graphlib.Graph()\n\n    this.addNode( x, y, false )\n    this.lastNodeVisit = {}\n\n    this.markNodeVisited( this.currentNodeID )\n    this.path = []\n  }\n\n  act( walker: Walker ): void {\n    if ( this.path.length ) {\n      this.moveToTarget( walker )\n    } else {\n      if ( this.targetNodeID ) {\n        this.markNodeVisited( this.targetNodeID )\n        this.currentNodeID = this.targetNodeID\n      }\n\n      this.pickUpNewTarget( walker )\n      this.moveToTarget( walker )\n    }\n    this.step += 1\n  }\n\n  // TODO: If close enough to another node, use it instead.\n  addNode( x: number, y: number, withEdge: boolean = true ): void {\n    this.graph.setNode( this.i, { x: x, y: y } )\n    if ( withEdge ) {\n      this.graph.setEdge( this.currentNodeID, this.i )\n    }\n    this.currentNodeID = this.i\n    this.i = succ( this.i )\n  }\n\n  private buildNewPath( walker: Walker ): void {\n    const pos: Point = this.graph.node( this.targetNodeID )\n\n    this.path = leePath( walker, ( x, y ) => {\n      return ( pos.x === x ) && ( pos.y === y )\n    })\n  }\n\n  private pickUpNewTarget( walker: Walker ): void {\n    let seenLastID: NodeID = this.currentNodeID\n    let seenLastStep: number = this.lastNodeVisit[ seenLastID ]\n\n    this.graph.neighbors( this.currentNodeID ).forEach( ( nodeID: NodeID ) => {\n      if ( seenLastStep > ( this.lastNodeVisit[ nodeID ] || 0 ) )\n        seenLastID = nodeID\n        seenLastStep = this.lastNodeVisit[ seenLastID ]\n      }\n    )\n\n    this.targetNodeID = seenLastID\n    this.buildNewPath( walker )\n  }\n\n  private moveToTarget( walker: Walker ): void {\n    const nextPoint: Point = this.path.shift()\n    if ( walker.stageMemory[ nextPoint.x ][ nextPoint.y ].tangible ) {\n      this.path = []\n      this.act( walker )\n    } else {\n      walker.x = nextPoint.x\n      walker.y = nextPoint.y\n    }\n  }\n\n  private markNodeVisited( nodeID: NodeID ): void {\n    this.lastNodeVisit[ nodeID ] = this.step\n  }\n}\n\nexport { Patrol }\n","import { Point, twoDimArray } from '../utils'\nimport { AI, TileRecall, Walker, leePath } from '../ai'\nimport { Patrol } from './patrol'\n\n// import { Logger } from \"../logger\"\n\nconst NEW_POINT_EVERY: number = 10\n\nclass Explorer implements AI {\n  path: Array< Point >\n  private step: number\n\n  constructor( public patrol: Patrol = undefined ) {\n    this.path = []\n    this.step = NEW_POINT_EVERY\n  }\n\n  act( walker: Walker ): void {\n    this.updatePatrol( walker )\n    if ( !this.path.length ) {\n      this.buildNewPath( walker )\n      if ( this.path.length ) {\n        this.act( walker )\n      } else {\n        // Logger.info( \"I'm done, time to patrol\" )\n        // console.log( \"I'm done, time to patrol\" )\n        walker.ai = this.patrol\n      }\n    } else {\n      const nextPoint: Point = this.path.shift()\n      if ( walker.stageMemory.at(nextPoint.x, nextPoint.y).tangible ) {\n        this.path = []\n        this.act( walker )\n      } else {\n        walker.x = nextPoint.x\n        walker.y = nextPoint.y\n      }\n    }\n  }\n\n  private buildNewPath( walker: Walker ): void {\n    this.path = leePath( walker, ( x, y ) => {\n      return !walker.stageMemory.at(x, y).seen\n    })\n  }\n\n  private updatePatrol( walker: Walker ): void {\n    if ( this.step === NEW_POINT_EVERY ) {\n      this.step = 0\n      if ( this.patrol === undefined ) {\n        this.patrol = new Patrol( walker.x, walker.y )\n      } else {\n        this.patrol.addNode( walker.x, walker.y )\n      }\n    }\n\n    this.step++\n  }\n}\n\nexport { Explorer }\n","export interface Visibility {\n  visible: boolean\n  degree: number\n}\n\nexport class Fov {\n  private doubleRadius: number\n\n  constructor(\n    private startx: number,\n    private starty: number,\n    private radius: number,\n    private width: number,\n    private height: number,\n    private checkSolid: (x: number, y: number) => boolean,\n    private markVisible: (x: number, y: number, degree: number) => void,\n  ) {\n    this.doubleRadius = this.radius * this.radius\n  }\n\n  public calc(): void {\n    this.markVisible(this.startx, this.starty, 1)\n\n    if (!this.checkSolid(this.startx, this.starty)) {\n      [[1, 1], [1, -1], [-1, 1], [-1, -1]].forEach(([dx, dy]) => {\n        this.castLight(1, 1.0, 0.0, 0, dx, dy, 0)\n        this.castLight(1, 1.0, 0.0, dx, 0, 0, dy)\n      })\n    }\n  }\n\n  private castLight(row: number, start: number, end: number, xx: number, xy: number, yx: number, yy: number) {\n    if (start < end) { return }\n\n    let newStart = 0.0\n    let blocked = false\n\n    for (let distance = row; distance <= this.radius && !blocked; distance++) {\n      let deltaY = -distance\n\n      for (let deltaX: number = -distance; deltaX <= 0; deltaX++) {\n        let currentX = Math.round(this.startx + deltaX * xx + deltaY * xy)\n        let currentY = Math.round(this.starty + deltaX * yx + deltaY * yy)\n        let leftSlope = (deltaX - 0.5) / (deltaY + 0.5)\n        let rightSlope = (deltaX + 0.5) / (deltaY - 0.5)\n\n        if (!(currentX >= 0 && currentY >= 0 && currentX < this.width && currentY < this.height) || start < rightSlope) {\n          continue\n        } else if (end > leftSlope) {\n          break\n        }\n\n        // check if it's within the lightable area and light if needed\n        if (this.doubleDistance(deltaX, deltaY) <= this.doubleRadius) {\n          this.markVisible(\n            currentX,\n            currentY,\n            1 - this.doubleDistance(deltaX, deltaY) / this.doubleRadius,\n          )\n        }\n\n        if (blocked) { // previous cell was a blocking one\n          if (this.checkSolid(currentX, currentY)) { // hit a wall\n            newStart = rightSlope\n          } else {\n            blocked = false\n            start = newStart\n          }\n        } else {\n          if (this.checkSolid(currentX, currentY) && distance < this.radius) { // hit a wall within sight line\n              blocked = true\n              this.castLight(distance + 1, start, leftSlope, xx, xy, yx, yy)\n              newStart = rightSlope\n          }\n        }\n      }\n    }\n  }\n\n  private doubleDistance(x: number, y: number): number {\n    return x * x + y * y\n  }\n}\n","import { twoDimArray } from '../utils'\n// import { Stage, Type, TileType } from '../game'\nimport { AI, TileRecall } from '../ai'\nimport { Explorer } from '../ai/explorer'\n\nimport { Visibility, Fov } from '../fov'\nimport { LevelMap, Tile } from '../grid'\n\nexport class MemoryTile implements Visibility {\n  public visible: boolean = false\n  public degree: number = 0\n  public seen: boolean = false\n  public tangible: boolean = false\n\n  constructor(\n    private tile?: Tile,\n    ) {\n  }\n}\n\nexport class Memory {\n  public field: MemoryTile[][]\n\n  constructor(\n    public width: number,\n    public height: number,\n    baseBlock: (() => MemoryTile) = () => new MemoryTile(),\n    ) {\n    this.field = twoDimArray(height, width, baseBlock)\n  }\n\n  at(x: number, y: number): MemoryTile {\n    return this.field[y][x]\n  }\n\n  public resetVisible(): void {\n    this.field.forEach((row) => {\n      row.forEach((tile) => {\n        // tile.updated = tile.visible\n        tile.visible = false\n      })\n    })\n  }\n}\n\n// TODO: Ensure seen is build before act() is called!\nexport class Walker {\n  ai: AI\n  // tile: Type\n  public stageMemory: Memory\n\n  constructor(public x: number, public y: number, private radius: number = 10, width, height) {\n    // this.tile = new Type( TileType.humanoid )\n    this.stageMemory = new Memory(width, height)\n    this.ai = new Explorer()\n  }\n\n  act(stage: LevelMap): void {\n    // this.stageMemory[ this.x ][ this.y ].updated = true\n\n    this.visionMask( stage )\n    this.ai.act( this )\n\n    // this.stageMemory[ this.x ][ this.y ].updated = true\n  }\n\n  private visionMask(stage: LevelMap): void {\n    this.stageMemory.resetVisible()\n\n    const see = (x: number, y: number, degree: number): void => {\n      const tile = this.stageMemory.at(x, y)\n      tile.visible = true\n      tile.degree = degree\n      tile.seen = true\n      tile.tangible = !stage.passibleThrough(x, y)\n    }\n\n    new Fov(\n      this.x,\n      this.y,\n      this.radius,\n      stage.width,\n      stage.height,\n      (x: number, y: number) => !stage.visibleThrough(x, y),\n      see,\n    ).calc()\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\nimport Cell from './Cell.vue'\n\nimport { Visibility, Fov } from './fov'\nimport { Walker, Memory, MemoryTile } from './creatures/walker'\n\nimport * as _ from 'lodash'\n\nimport { Block, Map, Tile, BlockRepository, LevelMap } from './grid'\n\nexport default Vue.extend({\n  data() {\n    return {\n      blocks: [\n        { content: [\n          \"WWW\",\n          \"WWW\",\n          \"WWW\",\n        ], weight: 0.5},\n\n        { content: [\n          \"RRR\",\n          \"RRR\",\n          \"RRR\",\n        ], weight: 20},\n\n        { content: [\n          \"WCW\",\n          \"RRR\",\n          \"RRR\",\n        ], weight: 20},\n        { content: [\n          \"WWC\",\n          \"RRR\",\n          \"RRR\",\n        ], weight: 20},\n        { content: [\n          \"CWC\",\n          \"RRR\",\n          \"RRR\",\n        ], weight: 20},\n        { content: [\n          \"WWW\",\n          \"RRR\",\n          \"RRR\",\n        ], weight: 20},\n\n        { content: [\n          \"WCW\",\n          \"CRR\",\n          \"WRR\",\n        ], weight: 20},\n        { content: [\n          \"WWW\",\n          \"WRR\",\n          \"WRR\",\n        ], weight: 20},\n        { content: [\n          \"WWW\",\n          \"CRR\",\n          \"WRR\",\n        ], weight: 20},\n        { content: [\n          \"WWC\",\n          \"WRR\",\n          \"WRR\",\n        ], weight: 20},\n        { content: [\n          \"WWC\",\n          \"WRR\",\n          \"CRR\",\n        ], weight: 20},\n\n        { content: [\n          \"WWW\",\n          \"CCW\",\n          \"WCW\",\n        ], weight: 20},\n        { content: [\n          \"WWW\",\n          \"CCC\",\n          \"WWW\",\n        ], weight: 20},\n        { content: [\n          \"WCW\",\n          \"CCC\",\n          \"WWW\",\n        ], weight: 20},\n        { content: [\n          \"WCW\",\n          \"CCC\",\n          \"WCW\",\n        ], weight: 20},\n      ],\n      map: [],\n      radius: 10,\n      player: {\n        x: 1,\n        y: 1,\n      },\n      pause: true,\n      ts: Date.now(),\n    }\n  },\n  components: {\n    Cell\n  },\n  computed: {\n    walker() {\n      if (this.map) {\n        return new Walker(\n          this.player.x,\n          this.player.y,\n          this.radius,\n          this.levelMap.width,\n          this.levelMap.height,\n        )\n      }\n    },\n    levelMap() {\n      if (this.map) {\n        return new LevelMap(this.map)\n      }\n\n    },\n    fov(): MemoryTile[][] {\n      if (this.ts && this.map) {\n        return this.walker.stageMemory.field\n      }\n\n      return []\n    }\n  },\n  methods: {\n    updatePlayerPosition(x: number, y: number) {\n      this.pause = false;\n      this.player.x = x;\n      this.player.y = y;\n    },\n    buildMap() {\n      let blockRepository = new BlockRepository(\n        new Block(this.rawToTiles(this.blocks[0].content), this.blocks[0].weight));\n      _.tail(this.blocks).forEach(({ content, weight }) => {\n        blockRepository.addBlock(new Block(this.rawToTiles(content), weight));\n      });\n\n      let blockMap = new Map(20, 20, blockRepository);\n      blockMap.fillMap(1, 1);\n      blockMap.postProcess();\n\n      clearInterval(this.walkerinterval)\n      this.walkerinterval = setInterval(() => {\n        if (this.pause) {\n          return\n        }\n\n        try {\n          if (this.walker) {\n            this.walker.act(this.levelMap)\n            this.ts = Date.now()\n            // this.pause = true\n            // this.player.x = this.walker.x\n            // this.player.y = this.walker.y\n          }\n        } catch (e) {\n          console.error(e)\n          this.pause = true\n        }\n\n      }, 300);\n\n      return blockMap.toMap();\n    },\n    rawToTiles(map: string[]): Tile[][] {\n      let tiles: Tile[][] = [];\n      map.forEach((row) => {\n        let tileRow: Tile[] = [];\n        row.split(\"\").forEach((key) => {\n          tileRow.push(Tile.retrive(key));\n        });\n        tiles.push(tileRow);\n      });\n      return tiles;\n    },\n    visibility(i: number, j: number) {\n      if (this.pause) {\n        return { background: 'black', color: 'darkgrey', opacity: 0.3 }\n      }\n\n      if (this.fov.length) {\n        if (this.fov[i][j].visible) {\n          return { opacity: this.fov[i][j].degree }\n        } else if (this.fov[i][j].seen) {\n          return { background: 'black', color: 'darkgrey', opacity: 0.3 }\n        } else {\n          return { background: 'black', color: 'black' }\n        }\n      } else {\n        return { background: 'black', color: 'darkgrey' }\n      }\n    }\n  },\n  created() {\n    this.map = this.buildMap()\n  }\n})\n","function injectStyle (context) {\n  require(\"!!../node_modules/mini-css-extract-plugin/dist/loader.js!css-loader?{\\\"autoprefixer\\\":false,\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!ts-loader?{\\\"appendTsSuffixTo\\\":[{}]}!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!ts-loader?{\\\"appendTsSuffixTo\\\":[{}]}!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-67292cb0\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=slm&optionsId=0!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"col\"},[_c('table',{staticClass:\"game-table\"},_vm._l((_vm.map),function(row,i){return _c('tr',{staticClass:\"row\"},_vm._l((row),function(cell,j){return _c('Cell',{key:i + '-' + j,style:(_vm.visibility(i, j)),attrs:{\"cell\":cell,\"player\":_vm.walker.x == j && _vm.walker.y == i},on:{\"setPosition\":function($event){_vm.updatePlayerPosition(j, i)}}})}))})),_c('button',{on:{\"click\":function($event){_vm.map = _vm.buildMap()}}},[_vm._v(\"Generate!\")]),_c('label',[_vm._v(\"radius\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.radius),expression:\"radius\"}],attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.radius)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.radius=$event.target.value}}}),_c('button',{on:{\"click\":function($event){_vm.pause = !_vm.pause}}},[_vm._v(_vm._s(_vm.pause ? 'Start' : 'Pause'))])]),_c('div',{staticClass:\"col\"},_vm._l((_vm.blocks),function(tile,i){return _c('div',{staticClass:\"block\"},[_c('div',{staticClass:\"wrapper\"},[_c('table',{staticClass:\"content game-table\"},_vm._l((_vm.rawToTiles(tile.content)),function(row,i){return _c('tr',{staticClass:\"row\"},_vm._l((row),function(cell,j){return _c('Cell',{key:i + '-' + j,attrs:{\"cell\":cell}})}))})),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tile.weight),expression:\"tile.weight\"}],attrs:{\"type\":\"number\"},domProps:{\"value\":(tile.weight)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tile, \"weight\", $event.target.value)}}})])])}))])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","import Vue from \"vue\";\nimport App from \"./App.vue\";\n\nimport \"./application.css\";\n\nimport \"bootstrap\"\n\nnew Vue({\n  el: \"#app\",\n  render: h => h(App)\n});\n"],"sourceRoot":""}